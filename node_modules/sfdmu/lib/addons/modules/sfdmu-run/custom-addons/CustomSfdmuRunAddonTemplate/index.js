"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class SfdmuCustomAddOnModule {
    constructor(runtime) {
        this.runtime = runtime;
    }
    async onExecute(context, args) {
        this.runtime.service.log(this, `The Add-On module ${context.moduleDisplayName} has been successfully started. The event ${context.eventName} has been fired.`);
        this.runtime.service.log(this, '');
        this.runtime.service.log(this, 'The arguments are:');
        this.runtime.service.log(this, args, "JSON");
        this.runtime.service.log(this, '');
        const data = this.runtime.service.getProcessedData(context);
        [].concat(data.recordsToInsert, data.recordsToUpdate).forEach(record => {
            const jsonString = String(record['LongText__c']) || '{}';
            if (jsonString) {
                const obj = JSON.parse(jsonString);
                record['TEST1__c'] = obj['TEST1__c'];
            }
            if (args) {
                Object.keys(args).forEach(function (prop) {
                    record[prop] = args[prop];
                });
            }
        });
        this.runtime.service.log(this, `The Add-On module ${context.moduleDisplayName} has been successfully completed.`);
        return null;
    }
}
exports.default = SfdmuCustomAddOnModule;
//# sourceMappingURL=index.js.map